<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Registro de Frequência - EscolaSystem</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f8f9fa;
      }
      .sidebar {
        height: 100vh;
        background-color: #fff;
        border-right: 1px solid #dee2e6;
      }
      .sidebar .nav-link.active {
        background-color: #eef2ff;
        color: #0d6efd;
        font-weight: 500;
      }
      .card-counter {
        border: 1px solid #dee2e6;
        border-radius: 0.5rem;
        padding: 1rem;
        background-color: #ffffff;
        text-align: center;
      }
      th {
        background-color: #264653 !important;
        color: white !important;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <!-- Sidebar -->
        <nav class="col-md-2 sidebar p-3">
          <h5 class="mb-4">EscolaSystem</h5>
          <p class="text-muted small">Gestão Acadêmica</p>
          <ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link" href="dashboard.html">Dashboard</a></li>
            <li class="nav-item"><a class="nav-link" href="alunos_test.html">Alunos</a></li>
            <li class="nav-item"><a class="nav-link" href="turmas.html">Turmas</a></li>
            <li class="nav-item">
              <a class="nav-link active" href="frequencia.html">Frequência</a>
            </li>
            <li class="nav-item"><a class="nav-link" href="relatorios.html">Relatórios</a></li>
          </ul>
          <div class="mt-5">
            <small class="text-muted">Usuário Logado</small>
            <div class="fw-bold">Professor</div>
            <div class="text-muted small">professor@gmail.com</div>
            <span class="badge bg-dark mt-2">Professor</span>
          </div>
          <button class="btn btn-outline-secondary btn-sm mt-4">
            Sair do Sistema
          </button>
        </nav>

        <!-- Main -->
        <main class="col-md-10 p-4">
          <h3>Registro de Frequência</h3>
          <p class="text-muted">Registre a presença dos alunos e acompanhe a assiduidade</p>

          <div class="card p-3 mb-4">
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">Turma</label>
                <select class="form-select" id="turmaSelect">
                  <option value="">Selecione</option>
                  <option>Turma A - 1º Ano - 1º Ano</option>
                  <option>Turma A - 2º Ano - 2º Ano</option>
                  <option>Turma B - 1º Ano - 1º Ano</option>
                </select>
              </div>
              <div class="col-md-6">
                <label class="form-label">Data da Aula</label>
                <input type="date" class="form-control" id="dataAula" />
              </div>
            </div>
          </div>

          <div class="row mb-4">
            <div class="col-md-4">
              <div class="card-counter">
                <div class="text-muted small">Total de Alunos</div>
                <div class="fs-4 fw-bold" id="totalAlunos">0</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card-counter">
                <div class="text-muted small">Presentes</div>
                <div class="fs-4 fw-bold text-success" id="presentes">0</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card-counter">
                <div class="text-muted small">Ausentes</div>
                <div class="fs-4 fw-bold text-danger" id="ausentes">0</div>
              </div>
            </div>
          </div>

          <!-- Lista de Chamada -->
          <div class="card p-3">
            <h5>Lista de Chamada</h5>
            <table class="table table-bordered mt-3">
              <thead>
                <tr>
                  <th>Aluno</th>
                  <th>Matrícula</th>
                  <th>Presença</th>
                  <th>Observações</th>
                </tr>
              </thead>
              <tbody id="listaChamada">
                <!-- Populado via JS -->
              </tbody>
            </table>
            <button class="btn btn-success mt-3">Salvar Frequência</button>
          </div>
        </main>
      </div>
    </div>

    <script>
      const alunos = [
        {
          nome: "Gabriel Ferreira Souza",
          email: "gabriel.souza@email.com",
          matricula: "20240004",
          turma: "Turma B - 1º Ano - 1º Ano",
        },
      ];

      const turmaSelect = document.getElementById("turmaSelect");
      const listaChamada = document.getElementById("listaChamada");
      const totalAlunosEl = document.getElementById("totalAlunos");
      const presentesEl = document.getElementById("presentes");
      const ausentesEl = document.getElementById("ausentes");

      turmaSelect.addEventListener("change", atualizarChamada);

      function atualizarChamada() {
        const turmaSelecionada = turmaSelect.value;
        const alunosFiltrados = alunos.filter((a) => a.turma === turmaSelecionada);
        listaChamada.innerHTML = "";

        alunosFiltrados.forEach((aluno, i) => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${aluno.nome}<br><small class="text-muted">${aluno.email}</small></td>
            <td>${aluno.matricula}</td>
            <td>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="presenca-${i}" checked value="presente">
                <label class="form-check-label">Presente</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="presenca-${i}" value="ausente">
                <label class="form-check-label">Ausente</label>
              </div>
            </td>
            <td><input type="text" class="form-control form-control-sm" placeholder="Observações (opcional)"></td>
          `;
          listaChamada.appendChild(row);
        });

        totalAlunosEl.textContent = alunosFiltrados.length;
        atualizarContadores();
        document.querySelectorAll('input[type=radio]').forEach((el) => {
          el.addEventListener('change', atualizarContadores);
        });
      }

      function atualizarContadores() {
        let presentes = 0;
        let ausentes = 0;
        document.querySelectorAll('input[type=radio]:checked').forEach((el) => {
          if (el.value === "presente") presentes++;
          else ausentes++;
        });
        presentesEl.textContent = presentes;
        ausentesEl.textContent = ausentes;
      }
    </script>
  </body>
</html>
